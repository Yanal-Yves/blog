<!doctype html><html lang=fr-fr dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Introduction# Objectif et audience# Il y a trois types d’utilisateurs du système d’e-mail :
Les utilisateurs des boîtes e-mail Les administrateurs des domaines Les mainteneurs de l’infrastructure e-mail Cette série d’articles s’adresse aux administrateurs de domaines qui ont besoin de configurer des boîtes e-mail de façon à empêcher l’usurpation d’identité.
Prérequis# Pour tirer pleinement profit de cet article et sécuriser votre domaine, vous devez :
Accès et Environnement Avoir un accès administrateur à la zone DNS de votre domaine (chez votre registrar ou hébergeur). Disposer d’un terminal (Linux/macOS) pour effectuer des requêtes DNS. Connaissances Techniques Compréhension du DNS : Savoir modifier une zone DNS. Connaître les types d’enregistrements : A, AAAA, TXT, CNAME, MX et PTR. Comprendre les notions de TTL (Time To Live) et de propagation DNS (délais de mise à jour). Réseau (IP) : Différencier IPv4 et IPv6. Comprendre la notation CIDR (ex: 192.51.100.0/24) utilisée fréquemment dans les règles SPF pour autoriser des plages d’adresses entières. Avoir une notion basique de la cryptographie asymétrique (clé privée / clé publique), utile pour comprendre le fonctionnement de la signature DKIM. Concepts spécifiques au mail# Tout au long de cette série d’articles, on considère un e-mail partant du domaine a.com (domaine expéditeur) à destination du domaine b.com (domaine de réception). Ex : alice@a.com vers bob@b.com.
Dans l’article, on parle d’ESP. Un ESP (pour Email Service Provider, ou Fournisseur de Services de Messagerie en français) est une entreprise ou une plateforme qui fournit des services pour aider les particuliers ou, plus couramment, les entreprises à gérer et envoyer des campagnes d’e-mails en masse (e-mail marketing, newsletters, etc.) ou des e-mails transactionnels.
Un e-mail transactionnel (ou e-mail de service/système) est un message automatisé et non promotionnel qui est envoyé à un utilisateur suite à une action spécifique que cet utilisateur a initiée sur un site web ou dans une application (ex : le mail qu’on reçoit quand on clique sur “mot de passe oublié”).
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yanal.fargialla.com/antispoofing-e-mail/01-architecture-concepts/"><meta property="og:site_name" content="Notes Techniques"><meta property="og:title" content="De SMTP à DMARC (1/9) : Architecture et concepts"><meta property="og:description" content="Introduction# Objectif et audience# Il y a trois types d’utilisateurs du système d’e-mail :
Les utilisateurs des boîtes e-mail Les administrateurs des domaines Les mainteneurs de l’infrastructure e-mail Cette série d’articles s’adresse aux administrateurs de domaines qui ont besoin de configurer des boîtes e-mail de façon à empêcher l’usurpation d’identité.
Prérequis# Pour tirer pleinement profit de cet article et sécuriser votre domaine, vous devez :
Accès et Environnement Avoir un accès administrateur à la zone DNS de votre domaine (chez votre registrar ou hébergeur). Disposer d’un terminal (Linux/macOS) pour effectuer des requêtes DNS. Connaissances Techniques Compréhension du DNS : Savoir modifier une zone DNS. Connaître les types d’enregistrements : A, AAAA, TXT, CNAME, MX et PTR. Comprendre les notions de TTL (Time To Live) et de propagation DNS (délais de mise à jour). Réseau (IP) : Différencier IPv4 et IPv6. Comprendre la notation CIDR (ex: 192.51.100.0/24) utilisée fréquemment dans les règles SPF pour autoriser des plages d’adresses entières. Avoir une notion basique de la cryptographie asymétrique (clé privée / clé publique), utile pour comprendre le fonctionnement de la signature DKIM. Concepts spécifiques au mail# Tout au long de cette série d’articles, on considère un e-mail partant du domaine a.com (domaine expéditeur) à destination du domaine b.com (domaine de réception). Ex : alice@a.com vers bob@b.com.
Dans l’article, on parle d’ESP. Un ESP (pour Email Service Provider, ou Fournisseur de Services de Messagerie en français) est une entreprise ou une plateforme qui fournit des services pour aider les particuliers ou, plus couramment, les entreprises à gérer et envoyer des campagnes d’e-mails en masse (e-mail marketing, newsletters, etc.) ou des e-mails transactionnels.
Un e-mail transactionnel (ou e-mail de service/système) est un message automatisé et non promotionnel qui est envoyé à un utilisateur suite à une action spécifique que cet utilisateur a initiée sur un site web ou dans une application (ex : le mail qu’on reçoit quand on clique sur “mot de passe oublié”)."><meta property="og:locale" content="fr_fr"><meta property="og:type" content="article"><meta property="article:section" content="antispoofing-e-mail"><meta property="article:modified_time" content="2025-12-23T09:20:27+01:00"><meta itemprop=name content="De SMTP à DMARC (1/9) : Architecture et concepts"><meta itemprop=description content="Introduction# Objectif et audience# Il y a trois types d’utilisateurs du système d’e-mail :
Les utilisateurs des boîtes e-mail Les administrateurs des domaines Les mainteneurs de l’infrastructure e-mail Cette série d’articles s’adresse aux administrateurs de domaines qui ont besoin de configurer des boîtes e-mail de façon à empêcher l’usurpation d’identité.
Prérequis# Pour tirer pleinement profit de cet article et sécuriser votre domaine, vous devez :
Accès et Environnement Avoir un accès administrateur à la zone DNS de votre domaine (chez votre registrar ou hébergeur). Disposer d’un terminal (Linux/macOS) pour effectuer des requêtes DNS. Connaissances Techniques Compréhension du DNS : Savoir modifier une zone DNS. Connaître les types d’enregistrements : A, AAAA, TXT, CNAME, MX et PTR. Comprendre les notions de TTL (Time To Live) et de propagation DNS (délais de mise à jour). Réseau (IP) : Différencier IPv4 et IPv6. Comprendre la notation CIDR (ex: 192.51.100.0/24) utilisée fréquemment dans les règles SPF pour autoriser des plages d’adresses entières. Avoir une notion basique de la cryptographie asymétrique (clé privée / clé publique), utile pour comprendre le fonctionnement de la signature DKIM. Concepts spécifiques au mail# Tout au long de cette série d’articles, on considère un e-mail partant du domaine a.com (domaine expéditeur) à destination du domaine b.com (domaine de réception). Ex : alice@a.com vers bob@b.com.
Dans l’article, on parle d’ESP. Un ESP (pour Email Service Provider, ou Fournisseur de Services de Messagerie en français) est une entreprise ou une plateforme qui fournit des services pour aider les particuliers ou, plus couramment, les entreprises à gérer et envoyer des campagnes d’e-mails en masse (e-mail marketing, newsletters, etc.) ou des e-mails transactionnels.
Un e-mail transactionnel (ou e-mail de service/système) est un message automatisé et non promotionnel qui est envoyé à un utilisateur suite à une action spécifique que cet utilisateur a initiée sur un site web ou dans une application (ex : le mail qu’on reçoit quand on clique sur “mot de passe oublié”)."><meta itemprop=dateModified content="2025-12-23T09:20:27+01:00"><meta itemprop=wordCount content="1651"><title>De SMTP à DMARC (1/9) : Architecture et concepts | Notes Techniques</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yanal.fargialla.com/antispoofing-e-mail/01-architecture-concepts/><link rel=stylesheet href=/book.min.6970156cec683193d93c9c4edaf0d56574e4361df2e0c1be4f697ae81c3ba55f.css integrity="sha256-aXAVbOxoMZPZPJxO2vDVZXTkNh3y4MG+T2l66Bw7pV8=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/fr.search.min.de20461ef65c38afc158f3b05a72504abee580a55e821febfd0c1af08e80f9db.js integrity="sha256-3iBGHvZcOK/BWPOwWnJQSr7lgKVegh/r/Qwa8I6A+ds=" crossorigin=anonymous></script><style>.mermaid{background-color:#fff!important;padding:20px;border-radius:8px;margin:20px 0;box-shadow:0 4px 6px rgba(0,0,0,.3);display:flex;justify-content:center}</style></head><body dir=ltr class="book-kind-page book-type-antispoofing-e-mail"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Notes Techniques</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Rechercher aria-label=Rechercher maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><input type=checkbox id=section-fe14ae1ac3b86a02483d04a7da151f7c class=toggle checked>
<label for=section-fe14ae1ac3b86a02483d04a7da151f7c class=flex><a href=/antispoofing-e-mail/>Antispoofing e-mail</a>
<img src=/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/antispoofing-e-mail/01-architecture-concepts/ class=active>De SMTP à DMARC (1/9) : Architecture et concepts</a></li><li><a href=/antispoofing-e-mail/02-standard-e-mails/>De SMTP à DMARC (2/9) : Les e-mails standards</a></li><li><a href=/antispoofing-e-mail/03-fcrdns-validation/>De SMTP à DMARC (3/9) : FCrDNS et validation croisée</a></li><li><a href=/antispoofing-e-mail/04-spf-sender-policy-framework/>De SMTP à DMARC (4/9) : SPF (Sender Policy Framework)</a></li><li><a href=/antispoofing-e-mail/05-dkim-domainkeys-identified-mail/>De SMTP à DMARC (5/9) : DKIM (DomainKeys Identified Mail)</a></li><li><a href=/antispoofing-e-mail/06-dmarc-domain-based-message-authentication-reporting-and-conformance/>De SMTP à DMARC (6/9) : DMARC (Domain-based Message Authentication)</a></li><li><a href=/antispoofing-e-mail/07-bimi-brand-indicators-for-message-identification-analyse-des-limites/>De SMTP à DMARC (7/9) : BIMI et analyse des limites</a></li><li><a href=/antispoofing-e-mail/08-parked-domain-locking/>De SMTP à DMARC (8/9) : Parked Domain Locking</a></li><li><a href=/antispoofing-e-mail/09-synthese-et-conclusion/>De SMTP à DMARC (9/9) : Synthèse et conclusion</a></li></ul></li><li><a>Recalboxes</a><ul><li><a href=/recalbox/pc-worms/>PC Worms</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/icons/menu.svg class=book-icon alt=Menu></label><h3>De SMTP à DMARC (1/9) : Architecture et concepts</h3><label for=toc-control><img src=/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#objectif-et-audience>Objectif et audience</a></li><li><a href=#prérequis>Prérequis</a></li></ul><ul><li><a href=#le-protocole-denvoi-de-mails--smtp>Le protocole d&rsquo;envoi de mails : SMTP</a></li><li><a href=#structure-dun-e-mail>Structure d&rsquo;un e-mail</a><ul><li><a href=#lenveloppe-the-envelope---protocole-smtp>L&rsquo;Enveloppe (The Envelope) - Protocole SMTP</a></li><li><a href=#len-tête-the-header---rfc-5322>L’En-tête (The Header) - RFC 5322</a></li><li><a href=#le-corps-du-message-the-body>Le Corps du Message (The Body)</a></li><li><a href=#le-voyage-dun-e-mail>Le voyage d&rsquo;un e-mail</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=introduction>Introduction<a class=anchor href=#introduction>#</a></h1><h2 id=objectif-et-audience>Objectif et audience<a class=anchor href=#objectif-et-audience>#</a></h2><p>Il y a trois types d&rsquo;utilisateurs du système d&rsquo;e-mail :</p><ul><li>Les utilisateurs des boîtes e-mail</li><li>Les administrateurs des domaines</li><li>Les mainteneurs de l&rsquo;infrastructure e-mail</li></ul><p>Cette série d&rsquo;articles s&rsquo;adresse aux administrateurs de domaines qui ont besoin de configurer des boîtes e-mail de façon à empêcher l&rsquo;usurpation d&rsquo;identité.</p><h2 id=prérequis>Prérequis<a class=anchor href=#pr%c3%a9requis>#</a></h2><p>Pour tirer pleinement profit de cet article et sécuriser votre domaine, vous devez :</p><ol><li><strong>Accès et Environnement</strong></li></ol><ul><li>Avoir un accès administrateur à la zone DNS de votre domaine (chez votre registrar ou hébergeur).</li><li>Disposer d&rsquo;un terminal (Linux/macOS) pour effectuer des requêtes DNS.</li></ul><ol start=2><li><strong>Connaissances Techniques</strong></li></ol><ul><li>Compréhension du DNS :<ul><li>Savoir modifier une zone DNS.</li><li>Connaître les types d&rsquo;enregistrements : A, AAAA, TXT, CNAME, MX et PTR.</li><li>Comprendre les notions de TTL (Time To Live) et de propagation DNS (délais de mise à jour).</li></ul></li><li>Réseau (IP) :<ul><li>Différencier IPv4 et IPv6.</li><li>Comprendre la notation CIDR (ex: 192.51.100.0/24) utilisée fréquemment dans les règles SPF pour autoriser des plages d&rsquo;adresses entières.</li></ul></li><li>Avoir une notion basique de la cryptographie asymétrique (clé privée / clé publique), utile pour comprendre le fonctionnement de la signature DKIM.</li></ul><h1 id=concepts-spécifiques-au-mail>Concepts spécifiques au mail<a class=anchor href=#concepts-sp%c3%a9cifiques-au-mail>#</a></h1><p>Tout au long de cette série d&rsquo;articles, on considère un e-mail partant du domaine <code>a.com</code> (domaine expéditeur) à destination du domaine <code>b.com</code> (domaine de réception). Ex : <code>alice@a.com</code> vers <code>bob@b.com</code>.<br>Dans l&rsquo;article, on parle d&rsquo;<strong>ESP</strong>. Un ESP (pour Email Service Provider, ou Fournisseur de Services de Messagerie en français) est une entreprise ou une plateforme qui fournit des services pour aider les particuliers ou, plus couramment, les entreprises à gérer et envoyer des campagnes d&rsquo;e-mails en masse (e-mail marketing, newsletters, etc.) ou des e-mails transactionnels.<br>Un e-mail transactionnel (ou e-mail de service/système) est un message automatisé et non promotionnel qui est envoyé à un utilisateur suite à une action spécifique que cet utilisateur a initiée sur un site web ou dans une application (ex : le mail qu&rsquo;on reçoit quand on clique sur &ldquo;mot de passe oublié&rdquo;).</p><h2 id=le-protocole-denvoi-de-mails--smtp>Le protocole d&rsquo;envoi de mails : SMTP<a class=anchor href=#le-protocole-denvoi-de-mails--smtp>#</a></h2><p>Le SMTP (Simple Mail Transfer Protocol) est le protocole standard utilisé pour envoyer et transférer le courrier électronique sur internet. Ce protocole sert uniquement à expédier (&ldquo;push&rdquo;) le message de votre ordinateur vers le serveur, puis de serveur en serveur. Il ne sert pas à récupérer vos e-mails pour les lire. Pour cela, on utilise d&rsquo;autres protocoles (comme IMAP ou POP) qui agissent comme la clé pour ouvrir votre boîte aux lettres et lire le courrier arrivé.</p><p>Historiquement défini par la <a href=https://www.rfc-editor.org/rfc/rfc821>RFC 821 (1982)</a> puis mis à jour par la <a href=https://www.rfc-editor.org/rfc/rfc5321>RFC 5321 (2008)</a>, le protocole SMTP a été conçu à une époque où Internet était un réseau de confiance. La sécurité n&rsquo;était pas la priorité.<br>Le diagramme suivant montre les différentes RFC qui ont façonné le protocole SMTP :</p><pre class=mermaid>graph TD
  %% --- Définition des Styles ---
  classDef base fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#000;
  classDef esmtp fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000;
  classDef merge fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px,color:#000;
  classDef current fill:#c8e6c9,stroke:#1b5e20,stroke-width:4px,color:#000;
  %% --- 1982 : L&#39;origine ---
  R821(&#34;&lt;b&gt;RFC 821&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Août 1982&lt;/i&gt;&lt;br/&gt;Fondation de SMTP.&#34;):::base
  %% --- La branche ESMTP (Années 90) ---
  R1425(&#34;&lt;b&gt;RFC 1425&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Fév 1993&lt;/i&gt;&lt;br/&gt;Invention ESMTP (EHLO).&#34;):::esmtp
  R1651(&#34;&lt;b&gt;RFC 1651&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Juil 1994&lt;/i&gt;&lt;br/&gt;Correctifs ESMTP.&#34;):::esmtp
  R1869(&#34;&lt;b&gt;RFC 1869&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Nov 1995&lt;/i&gt;&lt;br/&gt;Standard ESMTP Stable.&#34;):::esmtp
  %% --- La Fusion (Années 2000) ---
  R2821(&#34;&lt;b&gt;RFC 2821&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Avril 2001&lt;/i&gt;&lt;br/&gt;Fusion SMTP + ESMTP.&#34;):::merge
  R5321(&#34;&lt;b&gt;RFC 5321&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Oct 2008&lt;/i&gt;&lt;br/&gt;Standard Actuel.&#34;):::current
  %% --- Relations Chronologiques (Verticales) ---
  
  %% Astuce : Lien invisible pour forcer 821 au-dessus de 1425
  R821 ~~~ R1425
  %% Évolution de la branche ESMTP
  R1425 --&gt;|Remplace| R1651
  R1651 --&gt;|Remplace| R1869
  %% La Fusion des deux branches
  R821 --&gt;|Intégrée dans| R2821
  R1869 --&gt;|Intégrée dans| R2821
  %% Le Standard Final
  R2821 --&gt;|Remplacée par| R5321</pre><script src=/mermaid.min.js></script><script>mermaid.initialize({flowchart:{useMaxWidth:!0},theme:"default"})</script><h2 id=structure-dun-e-mail>Structure d&rsquo;un e-mail<a class=anchor href=#structure-dun-e-mail>#</a></h2><p>Un e-mail est une chaîne de caractères formatée selon des standards spécifiques (principalement la <a href=https://www.rfc-editor.org/rfc/rfc5322>RFC 5322 (2008)</a>), contenant un en-tête et un corps de message.<br>L&rsquo;en-tête contient notamment le <code>Return-Path</code> (l&rsquo;adresse pour les notifications d&rsquo;erreurs/rebonds non visible pour l&rsquo;utilisateur) et le <code>From</code> (l&rsquo;adresse affichée à l&rsquo;utilisateur), mais aussi d&rsquo;autres champs cruciaux comme le <code>To</code> (destinataire affiché) et le <code>Subject</code> (objet du message affiché à l&rsquo;utilisateur), ainsi que des champs techniques invisibles comme le <code>Message-ID</code> et des champs d&rsquo;authentification comme <code>DKIM-Signature</code> que nous verrons plus tard. Le <code>Message-ID</code> est l&rsquo;identifiant mondialement unique d&rsquo;un e-mail et indépendant du serveur qui l&rsquo;héberge.</p><p>Le diagramme suivant montre les différentes RFC qui ont façonné la structure d&rsquo;un e-mail :</p><pre class=mermaid>graph TD
  %% --- Définition des Styles (Identiques au schéma SMTP) ---
  classDef base fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#000;
  classDef mime fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000;
  classDef update fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px,color:#000;
  classDef current fill:#c8e6c9,stroke:#1b5e20,stroke-width:4px,color:#000;
  %% --- 1982 : L&#39;origine ---
  R822(&#34;&lt;b&gt;RFC 822&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Août 1982&lt;/i&gt;&lt;br/&gt;Format Texte Standard.&lt;br/&gt;(ASCII seulement)&#34;):::base
  %% --- 1996 : La Révolution Multimédia (MIME) ---
  %% Note: MIME est une extension, pas un remplacement
  R2045(&#34;&lt;b&gt;RFC 2045&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Nov 1996&lt;/i&gt;&lt;br/&gt;Standards MIME.&lt;br/&gt;(HTML, Pièces jointes...)&#34;):::mime
  %% --- 2001 : La Modernisation ---
  R2822(&#34;&lt;b&gt;RFC 2822&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Avril 2001&lt;/i&gt;&lt;br/&gt;Mise à jour syntaxique.&#34;):::update
  %% --- 2008 : Le Standard Actuel ---
  R5322(&#34;&lt;b&gt;RFC 5322&lt;/b&gt;&lt;br/&gt;&lt;i&gt;Oct 2008&lt;/i&gt;&lt;br/&gt;Standard Actuel&lt;br/&gt;(Format du Message).&#34;):::current
  %% --- Relations Chronologiques ---
  
  %% Lignée principale (Le format du texte)
  R822 --&gt;|Remplacée par| R2822
  R2822 --&gt;|Remplacée par| R5322
  %% L&#39;apport de MIME (Extension latérale)
  R822 -.-&gt;|Étendu par| R2045
  R2045 -.-&gt;|Toujours utilisé avec| R5322</pre><p>Un e-mail peut se décomposer en trois composants techniques :</p><h3 id=lenveloppe-the-envelope---protocole-smtp>L&rsquo;Enveloppe (The Envelope) - Protocole SMTP<a class=anchor href=#lenveloppe-the-envelope---protocole-smtp>#</a></h3><p>C&rsquo;est la partie utilisée par les serveurs pour le transport de l&rsquo;e-mail. Elle n&rsquo;est généralement pas visible par l&rsquo;utilisateur final. Elle est définie par les commandes du protocole SMTP (<code>MAIL FROM:</code> et <code>RCPT TO:</code>). Elle contient :</p><ul><li>L&rsquo;adresse de l&rsquo;expéditeur de l&rsquo;enveloppe (<code>MAIL FROM</code>) : C&rsquo;est cette adresse qui est utilisée pour le <code>Return-Path</code> dans l&rsquo;en-tête (une fois l&rsquo;e-mail reçu). Elle est essentielle pour les mécanismes SPF et la gestion des rebonds.</li><li>L&rsquo;adresse du destinataire de l&rsquo;enveloppe (<code>RCPT TO</code>) : L&rsquo;adresse réelle où l&rsquo;e-mail doit être livré.</li></ul><h3 id=len-tête-the-header---rfc-5322>L&rsquo;En-tête (The Header) - <a href=https://www.rfc-editor.org/rfc/rfc5322>RFC 5322</a><a class=anchor href=#len-t%c3%aate-the-header---rfc-5322>#</a></h3><p>C&rsquo;est un ensemble de champs structurés au début du message.<br>Il contient notamment les champs :</p><ul><li><code>From</code> (Adresse de l&rsquo;expéditeur affichée)</li><li><code>Return-Path</code> (qui est rempli avec l&rsquo;adresse <code>MAIL FROM</code> de l&rsquo;enveloppe)</li><li><code>To</code>, <code>Cc</code>, <code>Bcc</code>, <code>Subject</code>, <code>Date</code>.<br>Il contient également les informations de sécurité ajoutées par le serveur de réception pour indiquer le résultat des vérifications SPF, DKIM et DMARC.</li></ul><h3 id=le-corps-du-message-the-body>Le Corps du Message (The Body)<a class=anchor href=#le-corps-du-message-the-body>#</a></h3><p>C&rsquo;est le contenu réel de l&rsquo;e-mail, souvent formaté en texte simple (text/plain) et/ou en HTML (text/html).<br>Il est structuré selon le standard <strong>MIME</strong> (Multipurpose Internet Mail Extensions, <strong><a href=https://www.rfc-editor.org/rfc/rfc2045>RFC 2045</a></strong>), permettant d&rsquo;inclure des pièces jointes et du HTML.</p><h3 id=le-voyage-dun-e-mail>Le voyage d&rsquo;un e-mail<a class=anchor href=#le-voyage-dun-e-mail>#</a></h3><p>Pour comprendre le voyage d&rsquo;un e-mail, il est utile de connaître les acteurs logiciels impliqués :</p><ol><li>MUA (Mail User Agent) - Le Client de Messagerie<br>C&rsquo;est l&rsquo;interface utilisée par l&rsquo;humain pour lire et écrire des e-mails.<br><strong>Exemples :</strong> Mozilla Thunderbird, Microsoft Outlook, l&rsquo;application Mail sur iPhone, ou une interface web comme Roundcube ou Gmail (Webmail).<br><strong>Rôle :</strong> Il formate le message et l&rsquo;envoie au premier maillon de la chaîne (le MSA/MTA) via SMTP.</li><li>MTA (Mail Transfer Agent) - Le Facteur / Le Serveur de Relais<br>C&rsquo;est le logiciel serveur qui transporte l&rsquo;e-mail d&rsquo;une machine à une autre via le protocole SMTP.<br><strong>Exemples :</strong> Postfix, Sendmail, Microsoft Exchange Server.<br><strong>Rôle :</strong> Il reçoit le message du MUA, consulte le DNS (MX records) pour savoir où l&rsquo;envoyer, et le transmet au MTA du destinataire (ou à un relais intermédiaire). C&rsquo;est le MTA qui effectue souvent les contrôles SPF.</li><li>MDA (Mail Delivery Agent) - Le Trieur / Le Livreur Final<br>C&rsquo;est le logiciel qui reçoit le message final du MTA et le dépose dans la boîte aux lettres de l&rsquo;utilisateur sur le serveur.<br><strong>Exemples :</strong> Dovecot, Procmail.<br><strong>Rôle :</strong> Il stocke le message sur le disque dur pour qu&rsquo;il puisse être récupéré plus tard par le MUA (via les protocoles IMAP ou POP). C&rsquo;est souvent à ce stade que les filtres anti-spam (comme SpamAssassin) analysent le contenu final.</li></ol><p><strong>Le voyage typique :</strong><br>MUA (Expéditeur) ➔ MTA (Serveur départ) ➔ Internet ➔ MTA (Serveur arrivée) ➔ MDA (Stockage) ➔ MUA (Destinataire)</p><pre class=mermaid>graph TD
  %% --- Définition des Styles ---
  classDef client fill:#f8bbd0,stroke:#c2185b,stroke-width:2px,color:#000;
  classDef server fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#000;
  classDef storage fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,color:#000;
  classDef internet fill:#f5f5f5,stroke:#9e9e9e,stroke-width:2px,stroke-dasharray: 5 5,color:#000;
  %% --- Domaine A (Expéditeur) ---
  subgraph &#34;Domaine A (a.com)&#34;
      Alice(Alice):::client --&gt;|Rédige| MUA_A[MUA&lt;br/&gt;Thunderbird]:::client
      MUA_A --&gt;|SMTP&lt;br/&gt;Auth| MTA_A[MTA&lt;br/&gt;Facteur&lt;br/&gt;Postfix]:::server
  end
  %% --- Internet ---
  subgraph &#34;Internet&#34;
      MTA_A --&gt;|Requête DNS MX?| DNS((DNS)):::internet
      DNS -.-&gt;|Réponse IP| MTA_A
      MTA_A --&gt;|SMTP&lt;br/&gt;Transmission| MTA_B[MTA&lt;br/&gt;Facteur&lt;br/&gt;Postfix]:::server
  end
  %% --- Domaine B (Destinataire) ---
  subgraph &#34;Domaine B (b.com)&#34;
      MTA_B --&gt;|Livraison| MDA_B[(&#34;MDA&lt;br/&gt;Trieur&lt;br/&gt;Dovecot/Imap&#34;)]:::storage
      MDA_B -.-&gt;|IMAP / POP&lt;br/&gt;Récupération| MUA_B[MUA&lt;br/&gt;Webmail]:::client
      MUA_B --&gt;|Lit| Bob(Bob):::client
end</pre><h1 id=lanalogie-postale>L&rsquo;analogie postale<a class=anchor href=#lanalogie-postale>#</a></h1><p>Bien que les images aient leurs limites, elles permettent de garder de la hauteur sans se perdre dans les détails techniques. Voici les protocoles de sécurité que nous allons voir et leurs images respectives :</p><ol><li>SMTP est le facteur et le camion de livraison : Il prend votre lettre (e-mail) depuis votre boîte aux lettres de départ et la transporte jusqu&rsquo;au bureau de poste du destinataire.</li><li>FCrDNS valide le camion qui transporte l&rsquo;enveloppe. C&rsquo;est la vérification que la plaque d&rsquo;immatriculation (IP) correspond bien à la carte grise du camion (Nom de domaine du serveur). On s&rsquo;assure que le camion n&rsquo;est pas volé.</li><li>Si le FCrDNS valide le camion, le SPF valide l&rsquo;enveloppe et l&rsquo;adresse de l&rsquo;expéditeur (le <code>Return-Path</code>). L&rsquo;entreprise émettrice du message (le Domaine <code>a.com</code>) a publié une liste. Si le camion qui arrive chez <code>b.com</code> ne figure pas sur la liste, on refuse l&rsquo;enveloppe.</li><li>DKIM est un genre de sceau de cire numérique de l&rsquo;enveloppe. Attention cependant, DKIM ne permet pas de garantir que le message n&rsquo;a pas été lu, juste qu&rsquo;il n&rsquo;a pas été modifié. Une autre image est le scellé de preuves de la police car tout le monde peut voir ce qu&rsquo;il y a dedans, mais personne ne peut le modifier sans laisser de traces. La limite évidente de cette image est que l&rsquo;on n&rsquo;envoie pas nos lettres dans des scellés en plastique de la police !</li><li>DMARC vérifie la cohérence entre le message et l&rsquo;enveloppe :</li><li>Il ouvre l&rsquo;enveloppe.</li><li>Il regarde l&rsquo;en-tête du papier à lettre (le <code>From:</code> que le destinataire va lire).</li><li>Il compare cet en-tête avec les preuves extérieures : soit avec l&rsquo;adresse au dos de l&rsquo;enveloppe (<code>Return-Path</code> validé par le SPF), soit avec le logo sur le sceau de cire (Signature DKIM).</li></ol></article><hr class=book-spacer style="margin-top:3rem;border-top:1px solid var(--gray-200)"><div class=article-footer style=font-size:.9rem;color:var(--body-font-color)><p><strong>Auteur :</strong> Yanal-Yves FARGIALLA<br><strong>Dernière mise à jour :</strong> 23 décembre 2025</p><div style="display:flex;align-items:center;gap:10px;margin:1rem 0"><a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/ target=_blank><img alt="Licence Creative Commons" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png>
</a><span>Cet article est mis à disposition selon les termes de la <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/ target=_blank>Licence Creative Commons Attribution - Partage dans les Mêmes Conditions 4.0 International</a>.</span></div><div style="background-color:rgba(255,255,0,.1);padding:10px;border-left:4px solid #f6e05e;margin-top:1rem"><em><strong>Note de transparence :</strong> Cet article a été rédigé avec l'assistance de l'intelligence artificielle (Google Gemini) pour la structuration et la synthèse technique, puis vérifié et validé par l'auteur.</em></div></div><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><div class="flex flex-wrap justify-between"><span><a href=/antispoofing-e-mail/ class="flex align-center"><img src=/icons/backward.svg class=book-icon alt=Backward>
<span>Antispoofing e-mail</span>
</a></span><span><a href=/antispoofing-e-mail/02-standard-e-mails/ class="flex align-center"><span>De SMTP à DMARC (2/9) : Les e-mails standards</span>
<img src=/icons/forward.svg class=book-icon alt=Forward></a></span></div><div class=book-comments></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#objectif-et-audience>Objectif et audience</a></li><li><a href=#prérequis>Prérequis</a></li></ul><ul><li><a href=#le-protocole-denvoi-de-mails--smtp>Le protocole d&rsquo;envoi de mails : SMTP</a></li><li><a href=#structure-dun-e-mail>Structure d&rsquo;un e-mail</a><ul><li><a href=#lenveloppe-the-envelope---protocole-smtp>L&rsquo;Enveloppe (The Envelope) - Protocole SMTP</a></li><li><a href=#len-tête-the-header---rfc-5322>L’En-tête (The Header) - RFC 5322</a></li><li><a href=#le-corps-du-message-the-body>Le Corps du Message (The Body)</a></li><li><a href=#le-voyage-dun-e-mail>Le voyage d&rsquo;un e-mail</a></li></ul></li></ul></nav></div></aside></main></body></html>